<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>sprite_add_ext</title>
  <meta name="generator" content="Adobe RoboHelp 2022" />
  <link rel="stylesheet" type="text/css" href="../../../../../assets/css/default.css" />
  <script src="../../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="" />
  <meta name="topic-comment" content="" />
  <meta name="rh-index-keywords" content="sprite_add_ext,sprite_add_ext_error_unknown,sprite_add_ext_error_cancelled,sprite_add_ext_error_spritenotfound,sprite_add_ext_error_loadfailed,sprite_add_ext_error_decompressfailed,sprite_add_ext_error_setupfailed" />
  <meta name="search-keywords" content="sprite_add_ext,sprite_add_ext_error_unknown,sprite_add_ext_error_cancelled,sprite_add_ext_error_spritenotfound,sprite_add_ext_error_loadfailed,sprite_add_ext_error_decompressfailed,sprite_add_ext_error_setupfailed" />
  <meta name="template" content="assets/masterpages/Manual_Keyword_Page.htt" />
</head>
<body>
  <h1><span data-field="title" data-format="default">sprite_add_ext</span></h1>
  <p>This function loads an image from an external file or URL <em>asynchronously</em> and adds it as a new sprite.</p>
  <p>This is the asynchronous version of <span class="inline3_func"><a data-xref="{title}" href="sprite_add.htm">sprite_add</a></span>; instead of blocking execution of code and thereby freezing the game, it continues execution of the game&#39;s code after the function is called and triggers an asynchronous <a data-xref="{title}" href="../../../../../The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded</a> event once the sprite is fully loaded.</p>
  <p>The supported image file formats are PNG, JPEG, GIF, QOIF and Spine JSON files (the Spine JSON files require that their associated atlas and image files are placed next to them).</p>
  <p class="note"><span><span data-conref="../../../../../assets/snippets/Tag_note.hts"> </span> Spine JSON files are only supported for locally stored files, not for files requested via HTTP (the same as for <span class="inline3_func"><a data-xref="{title}" href="sprite_add.htm">sprite_add</a></span>).</span></p>
  <p>The <span class="inline2"><a data-xref="{title}" href="../../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> <a href="../../../Data_Structures/DS_Maps/DS_Maps.htm">DS Map</a> will contain the following fields in the async <a data-xref="{title}" href="../../../../../The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded</a> event: </p>
  <ul class="colour">
    <li><strong>&quot;filename&quot;</strong> - the path to the file that was originally passed to the function</li>
    <li><strong>&quot;id&quot;</strong> - the sprite ID, as returned by the function</li>
    <li><strong>&quot;http_status&quot;</strong> - contains the status value of the HTTP request if one was made, or 200 (&quot;OK&quot;) if the image was loaded from a file</li>
    <li><strong>&quot;status&quot;</strong> - contains a value of 0 or greater to indicate the load was successful, or one of the following (negative) error codes in case something went wrong: </li>
  </ul>
  <div>
    <table>
      <tbody>
        <tr>
          <th colspan="3"><span data-keyref="Type_Constant_Sprite_Add_Error"><a href="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add_ext.htm" target="_blank">Sprite Add Error Constant</a></span></th>
        </tr>
        <tr>
          <th>Constant</th>
          <th>Description</th>
          <th>Value</th>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_unknown</span><span class="inline"></span></td>
          <td>This is a generic error code when none of the others apply (the HTML5 runner only returns this constant in case of failure).</td>
          <td>-1</td>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_cancelled</span><span class="inline"></span></td>
          <td>This constant indicates that the request was cancelled while it was in progress.</td>
          <td>-2</td>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_spritenotfound</span></td>
          <td>This constant indicates that a sprite was removed somehow partway through the loading process.</td>
          <td>-3</td>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_loadfailed</span></td>
          <td>This constant indicates that a file loading operation failed.</td>
          <td>-4</td>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_decompressfailed</span></td>
          <td>This constant indicates that image decompression failed (which could be due to e.g. a corrupted file or unsupported image format).</td>
          <td>-5</td>
        </tr>
        <tr>
          <td><span class="inline">sprite_add_ext_error_setupfailed</span></td>
          <td>Indicates that, even though all data was loaded and decompressed, sprite resource creation itself failed.</td>
          <td>-6</td>
        </tr>
      </tbody>
    </table>
  </div>
  <p> </p>
  <h4>Syntax:</h4>
  <p class="code"><span data-field="title" data-format="default">sprite_add_ext</span>(fname, imgnum, xorig, yorig, prefetch);</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th>Argument</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>fname</td>
        <td><span data-keyref="Type_String"><a href="GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">String</a></span></td>
        <td>The path to the image file to add as a sprite (either a local file path or a web address)</td>
      </tr>
      <tr>
        <td>imgnum</td>
        <td><span data-keyref="Type_Real"><a href="GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The number of subimages in the file (1 for a single image, GIF or Spine sprite)</td>
      </tr>
      <tr>
        <td>xorig</td>
        <td><span data-keyref="Type_Real"><a href="GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The x position of the new sprite&#39;s origin</td>
      </tr>
      <tr>
        <td>yorig</td>
        <td><span data-keyref="Type_Real"><a href="GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The y position of the new sprite&#39;s origin</td>
      </tr>
      <tr>
        <td>prefetch</td>
        <td><span data-keyref="Type_Bool"><a href="GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Boolean</a></span></td>
        <td>Whether to immediately load the sprite into GPU memory</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Returns:</h4>
  <p class="code"><span data-keyref="Type_Asset_Sprite"><a href="The_Asset_Editors/Sprites.htm" target="_blank">Sprite Asset</a></span></p>
  <p> </p>
  <h4>Example:</h4>
  <p class="code_heading">Create Event</p>
  <p class="code">sprite_index = -1;<br />
    new_sprite = <span data-field="title" data-format="default">sprite_add_ext</span>(&quot;my_new_sprite_index.png&quot;, 1, 0, 0, true);</p>
  <p class="code_heading">Async Image Loaded Event</p>
  <p class="code">var _sprite_id = async_load[?&quot;id&quot;];<br />
    if (_sprite_id == new_sprite)<br />
    {<br />
        sprite_index = _sprite_id;<br />
    }</p>
  <p class="code_heading">Draw Event</p>
  <p class="code">if (sprite_index != -1)<br />
    {<br />
        draw_self();<br />
    }</p>
  <p>The above example defines code in three <a data-xref="{title}" href="../../../../../The_Asset_Editors/Object_Properties/Object_Events.htm">Object Events</a>. In the <strong>Create</strong> event the instance&#39;s <span class="inline2"><a data-xref="{title}" href="../Sprite_Instance_Variables/sprite_index.htm">sprite_index</a></span> is first set to <span class="inline2">-1</span> and the function <span class="inline3_func"><span data-field="title" data-format="default">sprite_add_ext</span></span> is called with <span class="inline2">fname</span> set to <span class="inline2">&quot;my_new_sprite_index.png&quot;</span> (i.e. an image file in the root of the <span class="inline2"><span data-keyref="Const_IncludedFiles_FolderName">datafiles</span></span> directory). The sprite ID returned by the function is stored in an instance variable <span class="inline2">new_sprite</span>.</p>
  <p>In the async <a data-xref="{title}" href="../../../../../The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded</a> event the value stored in <span class="inline2">async_load[?&quot;id&quot;]</span> is compared to the value in <span class="inline2">new_sprite</span>. If the two are equal, it means this Image Loaded event was triggered for the call to <span class="inline3_func"><span data-field="title" data-format="default">sprite_add_ext</span></span> made earlier in the Create event (there may be <em>many</em> other calls to <span class="inline3_func"><span data-field="title" data-format="default">sprite_add_ext</span></span>). The ID of the newly loaded sprite is then assigned as this instance&#39;s <span class="inline2">sprite_index</span>.</p>
  <p>In the <a href="../../../../../The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> instances of the object call <span class="inline3_func"><a data-xref="{title}" href="../../../Drawing/Sprites_And_Tiles/draw_self.htm">draw_self</a></span> if their <span class="inline2">sprite_index</span> is not set to <span class="inline2">-1</span> (or, rather, <em>no longer</em> set to <span class="inline2">-1</span>).</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div>Back: <a data-xref="{title}" href="Sprite_Manipulation.htm">Sprite Manipulation</a></div>
        <div>Next: <a data-xref="{title}" href="sprite_replace.htm">sprite_replace</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
sprite_add_ext
-->
  <!-- TAGS
sprite_add_ext
-->
</body>
</html>