<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>sprite_collision_mask</title>
  <meta name="generator" content="Adobe RoboHelp 2022" />
  <link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page explaining the function sprite_collision_mask" />
  <meta name="rh-index-keywords" content="sprite_collision_mask,bboxkind_precise,bboxkind_diamond,bboxkind_ellipse,bboxkind_rectangular,bboxkind_spine" />
  <meta name="search-keywords" content="sprite_collision_mask,bboxkind_rectangular,bboxkind_ellipse,bboxkind_diamond,bboxkind_precise,bboxkind_spine" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>sprite_collision_mask</h1>
  <p>With this function you can set the properties of the collision mask that a sprite should have. For information on sprite masks, see: <a data-xref="{text}" href="../../../../../The_Asset_Editors/Sprites.htm#p">Collision Mask</a></p>
  <p>You can supply one of the following bbox modes for the <span class="inline2">bboxmode</span> argument:</p>
  <div data-conref="../../../../../assets/snippets/Table_sprite_bbox_mode.hts"> </div>
  <p>If you select either automatic or full image as the bounding box mode, then the individual bounding box values can be set to 0. However for a user defined mask, you will have to set these values. The different bounding box values are always relative to the top left corner of the sprite (irrespective of the x and y origin) which is considered position (0, 0).</p>
  <p>Setting the kind of mask sets the general shape for the mask itself, but note that anything other than a rectangular mask will require more processing power when resolving collisions, with a subsequent drop in performance. In general, you should only use mask types other than rectangular when absolutely necessary.</p>
  <p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"> </span> This function does not permit the <b>rotated rectangle</b> collision mask kind.</p>
  <p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"> </span> Spine sprites can only use the <span class="inline2">bboxmode_fullimage</span> and <span class="inline2">bboxmode_manual</span> modes, using <span class="inline2">bboxkind_rectangular</span> on either mode, or <span class="inline2">bboxkind_spine</span> only in full image mode.</p>
  <p>The kind of mask that can be set will be one of the following constants, passed into the <span class="inline2">kind</span> argument:</p>
  <table>
    <colgroup>
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Bbox_Kind"><a href="sprite_collision_mask.htm" target="_blank">Bounding Box Kind (Shape) Constant</a></span></th>
      </tr>
      <tr>
        <th>Constant</th>
        <th>Description</th>
      </tr>
      <tr>
        <td><span class="inline">bboxkind_rectangular</span></td>
        <td>A rectangular (non-rotating) rectangle collision mask shape, usable for Spine sprites</td>
      </tr>
      <tr>
        <td><span class="inline">bboxkind_ellipse</span></td>
        <td>An elliptical collision mask shape</td>
      </tr>
      <tr>
        <td><span class="inline">bboxkind_diamond</span></td>
        <td>A diamond collision mask shape</td>
      </tr>
      <tr>
        <td><span class="inline">bboxkind_precise</span></td>
        <td>A precise collision mask, where the mask will conform to the non-transparent pixels of the sprite, based on the tolerance value given (see below))</td>
      </tr>
      <tr>
        <td><span class="inline">bboxkind_spine</span></td>
        <td>Apart from rectangle, this is the only valid option for Spine sprites. It enables more precise collision checking against the mesh in the sprite.</td>
      </tr>
    </tbody>
  </table>
  <p><br />
    Finally, tolerance is used to define how precise the mask is (when used with a &quot;full image&quot; mask, this will have no effect), with a tolerance of 0 meaning that the mask will follow every single pixel that has a transparency over 0, while other values will shift the collision mask perimeter depending on the transparency of the pixels.</p>
  <p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"> </span> This function will only work on added sprites or duplicated sprites and <b>not</b> directly on pre-made assets. You can duplicate sprites using the function <span style="font-size:1px;"><a href="sprite_duplicate.htm"><span class="inline">sprite_duplicate()</span></a></span>.</p>
  <p> </p>
  <h4>Syntax:</h4>
  <p class="code">sprite_collision_mask(ind, sepmasks, bboxmode, bbleft, bbtop, bbright, bbbottom, kind, tolerance);</p>
  <table>
    <tbody>
      <tr>
        <th>Argument</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>ind</td>
        <td><span data-keyref="Type_Asset_Sprite"><a href="../../../../../The_Asset_Editors/Sprites.htm" target="_blank">Sprite Asset</a></span></td>
        <td>The index of the sprite to set the bounding box of.</td>
      </tr>
      <tr>
        <td>sepmasks</td>
        <td><span data-keyref="Type_Bool"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Boolean</a></span></td>
        <td>Whether to create collision masks for each sub-image of the sprite (<span class="inline">true</span>), or one mask for all (<span class="inline">false</span>).</td>
      </tr>
      <tr>
        <td>bboxmode</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>What kind of bounding box to use. 0 = automatic, 1 = full image, 2 = user defined.</td>
      </tr>
      <tr>
        <td>bbleft</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The maximum left position of the bounding box.</td>
      </tr>
      <tr>
        <td>bbtop</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The maximum top position of the bounding box.</td>
      </tr>
      <tr>
        <td>bbright</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The maximum right position of the bounding box.</td>
      </tr>
      <tr>
        <td>bbbottom</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>The maximum bottom position of the bounding box.</td>
      </tr>
      <tr>
        <td>kind</td>
        <td><span data-keyref="Type_Constant_Bbox_Kind"><a href="sprite_collision_mask.htm" target="_blank">Bounding Box Kind (Shape) Constant</a></span></td>
        <td>The kind of mask, a constant (see the table in the description).</td>
      </tr>
      <tr>
        <td>tolerance</td>
        <td><span data-keyref="Type_Real"><a href="../../../../GML_Overview/Data_Types.htm" target="_blank">Real</a></span></td>
        <td>Indicates the tolerance in the transparency value (0=no tolerance, 255=full tolerance).</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Returns</h4>
  <p class="code"><span data-keyref="Type_Void">N/A</span></p>
  <p> </p>
  <h4>Example:</h4>
  <p class="code">spr = sprite_add(&quot;player_5.png&quot;, 16, true, true, 0, 0);<br />
    sprite_collision_mask(spr, true, 1, 0, 0, 0, 0, 0, 0);</p>
  <p>The above code loads a sprite from an external source and stores the new index in the variable &quot;spr&quot;. The code then sets the new sprite to have a precise collision mask for each of its sub-images.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Sprite_Manipulation.htm">Sprite Manipulation</a></div>
        <div style="float:right">Next: <a href="sprite_nineslice_create.htm">sprite_nineslice_create</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
sprite_collision_mask
bboxkind_precise
bboxkind_diamond
bboxkind_ellipse
bboxkind_rectangular
bboxkind_spine
-->
  <!-- TAGS
sprite_collision_mask
-->
</body>
</html>