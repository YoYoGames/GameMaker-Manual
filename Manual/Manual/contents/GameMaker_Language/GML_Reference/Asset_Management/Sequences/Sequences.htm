<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Sequências</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page outlining the different functions and variables associated with Sequences" />
  <meta name="rh-index-keywords" content="" />
  <meta name="search-keywords" content="Sequences" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Sequências</h1>
  <p>As seqüências são geralmente criadas no <span class="notranslate">IDE</span> usando o <a href="../../../../The_Asset_Editors/Sequences.htm">editor Sequence</a>, mas também podem ser criadas e editadas usando código. Entretanto, antes de analisar as funções disponíveis, é importante entender a forma como <span class="notranslate">sequences</span> é definido em <span class="notranslate">GameMaker</span> e os diferentes termos que serão utilizados.</p>
  <p>Para começar, no nível superior, você tem um <b>elemento de seqüência</b>. Isto é o que você coloca em uma camada em um <span class="notranslate">room</span>, seja através do editor <span class="notranslate">Room</span> ou em código usando as <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">funções</a> apropriadas <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">da camada</a>. O elemento da camada não tem propriedades reais além de um valor de identificação do elemento, mas esta identificação é necessária para usar as funções de camada acima mencionadas para alterar a reprodução de <span class="notranslate">sequence</span> ou para acessar os dados de <span class="notranslate">sequence</span>.</p>
  <p>Em seguida, você tem <b>objetos de seqüência</b> e <b>instâncias de seqüência</b> muito parecidas com as instâncias gerais <span class="notranslate">objects</span> e instâncias. Um <i>objeto</i> <span class="notranslate">sequence</span> é o recurso básico como você o criou no <b>Navegador de Ativos</b> ou usando a função <a href="sequence_create.htm"><span class="inline">sequence_create()</span></a>e a <i>instância</i> <span class="notranslate">sequence</span> é a &quot;cópia&quot; daquele <span class="notranslate">sequence</span> <span class="notranslate">object</span> que foi colocado em um <span class="notranslate">room</span> como um elemento em uma camada. Pense em <span class="notranslate">sequence</span> <span class="notranslate">objects</span> como plantas e instâncias <span class="notranslate">sequence</span> como a criação a partir dessas plantas. <span class="notranslate">Sequence</span> <span class="notranslate">objects</span> e instâncias são <a href="../../../GML_Overview/Structs.htm">estruturas</a> e - ao contrário do regular <span class="notranslate">objects</span> - um <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> pode ser editado em <span class="notranslate">runtime</span>, o que afetará todas as outras instâncias daquele <span class="notranslate">sequence</span> quando você as criar como elementos (e qualquer edição feita em um <span class="notranslate">sequence</span> <span class="notranslate">object</span> <b>não</b> será reiniciada reiniciando o jogo ou o <span class="notranslate">room</span> usando as funções <span class="inline">room_restart()</span> ou <span class="inline">game_restart()</span> ). A instância <span class="notranslate">sequence</span> <span class="notranslate">struct</span> contém alguns parâmetros para controlar a reprodução e as coisas (isto é explicado com mais detalhes abaixo), assim como os <b>dados da seqüência</b> <span class="notranslate">struct</span>.</p>
  <p>Finalmente, como mencionado acima, você tem os <b>dados da seqüência</b>, que é outro <span class="notranslate">struct</span>. Este <span class="notranslate">struct</span> contém <i>todos os</i> dados sobre o <span class="notranslate">sequence</span>. As faixas que contém, as propriedades que essas faixas possuem, a velocidade de reprodução e muito mais. Os detalhes exatos deste conteúdo <span class="notranslate">structs</span> estão descritos abaixo, mas basicamente consiste da <b>faixa de ativos</b> <span class="notranslate">structs</span> e da <b>faixa de parâmetros</b> <span class="notranslate">structs</span> que usam <b>dados do quadro-chave</b> para realmente executar ações enquanto o <span class="notranslate">sequence</span> é reproduzido.</p>
  <p>Os elementos de seqüência são tratados usando as <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">funções da camada</a> <span class="notranslate">room</span>, mas para <span class="notranslate">sequence</span> <span class="notranslate">objects</span>, instâncias e dados temos as seguintes funções:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="sequence_exists.htm"><span class="notranslate">sequence_exists</span></a></li>
    <li><a href="sequence_create.htm"><span class="notranslate">sequence_create</span></a></li>
    <li><a href="sequence_destroy.htm"><span class="notranslate">sequence_destroy</span></a></li>
    <li><a href="sequence_get.htm"><span class="notranslate">sequence_get</span></a></li>
    <li><a href="sequence_track_new.htm"><span class="notranslate">sequence_track_new</span></a></li>
    <li><a href="sequence_keyframe_new.htm"><span class="notranslate">sequence_keyframe_new</span></a></li>
    <li><a href="sequence_keyframedata_new.htm"><span class="notranslate">sequence_keyframedata_new</span></a></li>
    <li><a href="sequence_get_objects.htm"><span class="notranslate">sequence_get_objects</span></a></li>
    <li><a href="sequence_instance_override_object.htm"><span class="notranslate">sequence_instance_override_object</span></a></li>
  </ul>
  <p> </p>
  <p>Há também uma <strong>variável incorporada</strong> associada às instâncias que pode ser usada para determinar se a instância foi usada em um <span class="notranslate">sequence</span> ou não:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="in_sequence.htm"><span class="notranslate">in_sequence</span></a></li>
  </ul>
  <p class="note"><strong>IMPORTANTE!</strong> Se seu <span class="notranslate">sequence</span> tem alguma instância, estas instâncias não devem alterar suas variáveis <span class="inline"><span style="font-size:14px;">image_xscale</span> / <span class="inline"><span style="font-size:14px;">image_yscale</span> / <span class="inline"><span style="font-size:14px;">image_angle</span> / <span class="inline"><span style="font-size:14px;">x</span> / <span class="inline"><span style="font-size:14px;">y</span>, pois elas serão sobrescritas quando o <span class="notranslate">sequence</span> atualizar cada passo após começar a ser reproduzido.</p>
  <p> </p>
  <p>Antes de utilizar estas funções para criar ou editar <span class="notranslate">sequences</span>, recomendamos que você leia as descrições detalhadas fornecidas abaixo para as propriedades <span class="notranslate">struct</span>. Uma visão geral de como criar um novo <span class="notranslate">sequence</span> seria:</p>
  <ul class="colour">
    <li>Criar o novo <span class="notranslate">sequence</span> <span class="notranslate">object</span> usando a função <span class="inline"><a href="sequence_create.htm">sequence_create()</a></span> e armazenar o índice <span class="notranslate">sequence</span> <span class="notranslate">object</span> em uma variável. Este índice lhe dá acesso ao <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> .</li>
  </ul>
  <p class="code">myseq = sequence_create();</p>
  <ul class="colour">
    <li>Defina os valores de nível superior <span class="notranslate">sequence</span> <span class="notranslate">object</span> como comprimento, modo de jogo, velocidade de jogo, etc... Por exemplo:</li>
  </ul>
  <p class="code">myseq.length = 120;<br />
    myseq.loopmode = seqplay_pingpong</p>
  <ul class="colour">
    <li>Antes de você poder adicionar faixas ao <span class="notranslate">sequence</span> <span class="notranslate">object</span>, você precisa criá-las, então agora você criaria uma série de faixas de <i>ativos</i> que foram definidos com a função <a href="sequence_track_new.htm"><span class="inline">sequence_track_new()</span></a>. Observe que em código, realmente não há diferença entre <span class="notranslate">asset</span> faixas e faixas de parâmetros - todas elas são simplesmente faixas e como elas se comportam dependerá do tipo de faixa que você criar e se elas são atribuídas como sub-faixas a uma faixa de nível superior ou não. Assim, você criaria uma faixa para um <span class="notranslate">asset</span>, e então atribuiria subfaixas para os diferentes parâmetros a ela e estas subfaixas atuariam como as faixas de <i>parâmetros</i> para o <span class="notranslate">asset</span>. O exemplo abaixo cria uma única faixa gráfica <span class="notranslate">asset</span> que será adicionada ao <span class="notranslate">sequence</span> mais tarde:</li>
  </ul>
  <p class="code">var mytracks = array_create(1);<br />
    mytracks[0] = sequence_track_new(seqtracktype_graphic);</p>
  <ul class="colour">
    <li>Cada faixa <span class="notranslate">asset</span> precisa ter alguns dados para dizer ao <span class="notranslate">sequence</span> como vai ficar, ou sua posição, etc... e isto é adicionado na forma de <i>quadros-chave</i>. No nível superior para uma faixa <span class="notranslate">asset</span>, você pode definir <span class="notranslate">keyframes</span> para várias coisas (listadas na seção sobre a faixa <span class="notranslate">Struct</span>, abaixo), mas note que como estas são <span class="notranslate">asset</span> faixa <span class="notranslate">keyframes</span>, elas não serão interpoladas e simplesmente mudarão o valor a que se referem quando o quadro dado for alcançado. Cada <span class="notranslate">keyframe</span> é um <span class="notranslate">struct</span> que é adicionado a uma matriz, e então esta matriz é atribuída à faixa <span class="notranslate">asset</span>. Para criar o <span class="notranslate">keyframe</span> <span class="notranslate">struct</span>, chamaríamos a função <a href="sequence_keyframe_new.htm"><span class="inline">sequence_keyframe_new()</span></a> e para povoar o <span class="notranslate">keyframe</span> com os dados necessários, usaríamos a função <a href="sequence_keyframedata_new.htm"><span class="inline">sequence_keyframedata_new()</span></a>:</li>
  </ul>
  <p class="code">// Create a new keyframe struct for a graphics asset track and add it to an array (as you can have multiple keys in a frame)<br />
    var graphickeys = array_create(1);<br />
    graphickeys[0] = sequence_keyframe_new(seqtracktype_graphic);<br />
    // Set the graphics keyframe top level data for the keyframe position and length, etc...<br />
    graphickeys[0].frame = 0;<br />
    graphickeys[0].length = 1;<br />
    graphickeys[0].stretch = true;<br />
    graphickeys[0].disabled = false;<br />
    // Create the channel data that will go into this keyframe (again an array, as each key can have multiple channels of keyframe data)<br />
    var graphickeydata = array_create(1);<br />
    graphickeydata[0] = sequence_keyframedata_new(seqtracktype_graphic);<br />
    graphickeydata[0].spriteIndex = spr_Platform;<br />
    graphickeydata[0].channel = 0;<br />
    // Add the keyframe data channels to the graphics track keyframe<br />
    graphickeys[0].channels = graphickeydata;<br />
    // Add the definied keyframes to the track<br />
    mytracks[0].name = &quot;TestGraphicTrack&quot;;<br />
    mytracks[0].keyframes = graphickeys;</p>
  <ul class="colour">
    <li>Agora precisamos criar uma faixa de parâmetros que designaremos como uma sub-faixa para a faixa gráfica que acabamos de criar. Isto será feito de forma semelhante como mostrado acima, somente agora precisamos dar à pista um nome que mostre seu propósito, neste caso &quot;posição&quot;, pois estaremos usando esta pista para mover a pista gráfica ao longo dos quadros de animação <span class="notranslate">sequence</span>:</li>
  </ul>
  <p class="code">// Create a new parameter track struct for the position of the graphic<br />
    var paramtracks = array_create(1);<br />
    paramtracks[0] = sequence_track_new(seqtracktype_real);<br />
    paramtracks[0].name = &quot;position&quot;;<br />
    paramtracks[0].interpolation = true;<br />
    // Create the keyframe struct to hold the parameter channel data and set the frame position for the keyframe<br />
    var paramkeys = array_create(2);<br />
    paramkeys[0] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[0].frame = 0;<br />
    paramkeys[1] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[1].frame = 120;<br />
    // Create the keyframe data structs<br />
    var paramkeydata1 = array_create(2);<br />
    paramkeydata1[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[0].channel = 0; // Channel 0 for a position track is the X position<br />
    paramkeydata1[0].value = 0;<br />
    paramkeydata1[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[1].channel = 1; // Channel 1 for a position track is the Y position<br />
    paramkeydata1[1].value = 0;<br />
    var paramkeydata2 = array_create(2);<br />
    paramkeydata2[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[0].channel = 0;<br />
    paramkeydata2[0].value = room_width;<br />
    paramkeydata2[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[1].channel = 1;<br />
    paramkeydata2[1].value = room_height;<br />
    // Assign the keyframe data structs to the channels for each key<br />
    paramkeys[0].channels = paramkeydata1;<br />
    paramkeys[1].channels = paramkeydata2;<br />
    // Assign the keys to the parameter track<br />
    paramtracks[0].keyframes = paramkeys;</p>
  <ul class="colour">
    <li>Com isso feito, a última coisa a fazer é atribuir a faixa de parâmetros como uma sub-faixa ao nosso gráfico principal <span class="notranslate">asset</span> faixa que criamos no início e depois atribuir estas faixas ao <span class="notranslate">sequence</span> que podemos então criar uma instância de na sala:</li>
  </ul>
  <p class="code">mytracks[0].tracks = paramtracks;<br />
    myseq.tracks = mytracks;<br />
    layer_sequence_create(&quot;Assets_1&quot;, 0, 0, myseq);</p>
  <p>As instruções acima criam um <span class="notranslate">sequence</span> <span class="notranslate">object</span> muito simples que desenha um <span class="notranslate">sprite</span> na posição (0, 0) <i>da seqüência</i> e depois o move para o canto inferior direito e de volta em um <span class="notranslate">loop</span>. Como mencionado, há vários lugares onde você precisa acessar diferentes <span class="notranslate">structs</span> para dar ou obter dados sobre o <span class="notranslate">sequence</span>, e as seções abaixo listam todas as diferentes propriedades que estes <span class="notranslate">structs</span> contêm:</p>
  <ul class="colour">
    <li><a name="object"></a><a href="Sequence_Structs/The_Sequence_Object_Struct.htm"><label for="1">O <span class="notranslate">Sequence</span> <span class="notranslate">Object</span> Estruturas</label></a></li>
    <li><a name="instance"></a><a href="Sequence_Structs/The_Sequence_Instance_Struct.htm"><label for="2">A estrutura da instância <span class="notranslate">Sequence</span> </label></a></li>
    <li><a name="track"></a><a href="Sequence_Structs/The_Track_Struct.htm"><label for="3">A estrutura da via</label></a></li>
    <li><a name="keyframe"></a><a href="Sequence_Structs/The_Keyframe_Struct.htm"><label for="4">O <span class="notranslate">Keyframe</span> Estruturas</label></a></li>
    <li><a name="keyframe_data"></a><a href="Sequence_Structs/The_Keyframe_Data_Struct.htm"><label for="5">A estrutura de dados <span class="notranslate">Keyframe</span> </label></a></li>
  </ul>
  <p> </p>
  <p>Finalmente, é possível adicionar código a <span class="notranslate">sequences</span> que pode ser acionado como um <strong>evento</strong> por um <strong>momento</strong> ou como uma <strong>mensagem de transmissão</strong>. Isto é explicado na íntegra na página seguinte:</p>
  <ul class="colour">
    <li><a href="Sequence_Events_Moments_Broadcast.htm">Eventos, Momentos e Mensagens de Radiodifusão</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Voltar: <a href="../Asset_Management.htm">Gestão de ativos</a></div>
        <div style="float:right">A seguir: <a href="../Fonts/Fonts.htm">Fontes</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Todos os direitos reservados</span></h5>
  </div>
  <!-- KEYWORDS
Sequences
-->
  <!-- TAGS
sequence_functions
-->
</body>
</html>